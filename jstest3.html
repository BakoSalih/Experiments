<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Hello World</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/5.1.3/pixi.min.js"></script>

  <style>
	body {background-color: white;}
	.row {
  display: flex;
}

.column {
  flex: 50%;
  background-color: lightgray;
}

.input0 {
	padding: 10px
}
   </style>
</head>
<body>

<div class="row">
  <div class="column", id="simulation">
	<div id="sim"></div>
  </div>
  <div class="column">
	<div id="in1", class="input0">n = </div>
	<div id="in2", class="input0">m = </div>
  </div>
</div>

<button onclick="myFunction()">Add</button>
<button onclick="myRemove()">Remove</button>

<script type="text/javascript">

let type = "WebGL"
if(!PIXI.utils.isWebGLSupported()){
  type = "canvas"
}
//Create a Pixi Application
let app = new PIXI.Application({
  width: 500,
  height: 500,
  antialias: true,
  transparent: true,
  resolution: 1 //,
  //view: document.getElementById('row')
}
);

//Add the canvas that Pixi automatically created for you to the HTML document
//document.body.appendChild(app.view);
document.getElementById("sim").appendChild(app.view);

/*
//load an image and run the `setup` function when it's done
const loader = new PIXI.Loader();
loader
.add("images/tri.png")
.add("images/tri2.png")
.add("images/hex2.png")
.load(setup);
*/


//This `setup` function will run when the image has loaded
function setup(n,m) {
	let container = new PIXI.Container();
	app.stage.addChild(container);

	const x0 = 20;
	const y0 = 20;
	//let n = 5;
	//let m = 5;
	
	// Move container to the center
	container.x = app.screen.width / 2;
	container.y = app.screen.height / 2;

	// Center bunny sprite in local container coordinates
	container.pivot.x = container.width / 2;
	container.pivot.y = container.height / 2;
	
	for (i = -n; i <= n; i++) {
	  for (j = -m; j <= m; j++) {
		let vertex = new PIXI.Graphics();
		const xcord = x0*j;
		const ycord = y0*i;
		vertex.beginFill(0x000000);
		vertex.drawCircle(xcord , ycord, 1);
		vertex.endFill();
		container.addChild(vertex);
	  }
	}
	
	app.ticker.add((delta) => {
    // rotate the container!
    // use delta to create frame-independent transform
    container.rotation -= 0.01 * delta;
});
}

function myFunction() {
  //let n = ;
  n = document.getElementById("first").value;
  m = document.getElementById("second").value;
  //document.getElementById("second").setAttribute("value", n); 
  setup(n,m);
}

/*
 function myRemove() {
  var d = document.getElementById("sim");
  d.remove();
  const newDiv = document.createElement("div");
  newDiv.setAttribute("id", "sim");
  document.getElementById("simulation").appendChild(newDiv);
  let app = new PIXI.Application({
  width: 500,
  height: 500,
  antialias: true,
  transparent: true,
  resolution: 1
}
);

//Add the canvas that Pixi automatically created for you to the HTML document
//document.body.appendChild(app.view);
document.getElementById("sim").appendChild(app.view);
} 

//Add the canvas that Pixi automatically created for you to the HTML document
//document.body.appendChild(app.view);
document.getElementById("sim").appendChild(app.view);
}
*/



function myRemove() {
  cl = app.stage.children;
  app.stage.removeChildren(0)
};

var y = document.createElement("INPUT");
  y.setAttribute("type", "text");
  y.setAttribute("value", 2);
  y.setAttribute("id", "first");
  document.body.appendChild(y);
  document.getElementById("in1").appendChild(y);
  
var x = document.createElement("INPUT");
  x.setAttribute("type", "text");
  x.setAttribute("value", 8);
  x.setAttribute("id", "second");
  //document.body.appendChild(x);
  document.getElementById("in2").appendChild(x);

</script>


</body>
</html>
