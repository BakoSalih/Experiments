function W_split(r){const o=r.length,n=[];for(var t=0;t<o;t++)n[t]=[],n[t].length=o,n[t].fill(0);for(t=0;t<o;t++)for(var f=0;f<o;f++)0==r[t][f]&&(n[t][f]=1,r[t][f]=1);return r.im=n,r}function Matching(r,o){const n=[];for(s=0;s<o+2;s++)n[s]=new Uint8Array(o+2),n[s].fill(!1);const t=o/2;let f=0;for(var s=0;s<=t;s++){for(var e=[],c=t-s+1;c<=t+s-1;c+=2)for(var a=t-s+1;a<=t+s-1;a+=2){switch(f+=1,n[a][c]+n[a+1][c]+n[a][c+1]+n[a+1][c+1]){case 1:const r=n[a][c];n[a][c]=n[a+1][c+1],n[a+1][c+1]=r;const o=n[a+1][c];n[a+1][c]=n[a][c+1],n[a][c+1]=o;break;case 2:n[a][c]=!1,n[a+1][c]=!1,n[a][c+1]=!1,n[a+1][c+1]=!1,e.push([c,a,f]);break;case 0:e.push([c,a,f])}}for(var i=0;i<e.length;i++){const o=e[i][0],t=e[i][1];if(!(n[t-1][o]||n[t+2][o]||n[t][o-1]||n[t+1][o-1])){Math.random()<r[r.length-e[i][2]]?(n[t][o]=!0,n[t+1][o+1]=!0):(n[t+1][o]=!0,n[t][o+1]=!0)}}}const h=[];for(s=o;s>=1;s--){const r=new Uint8Array(o);for(var l=1;l<=o;l++)r[l-1]=n[s][l];h.push(r)}return h}function Reduction(r,o){const n=r.length,t=n/2,f=[];for(var s=0;s<=t-1;s++)for(var e=n-2*s-2;e>=0;e-=2)for(var c=n-2*s-2;c>=0;c-=2){const n=r[c+s][e+s],t=r[c+1+s][e+s],h=r[c+s][e+1+s],l=r[c+1+s][e+1+s],u=o[c+s][e+s],g=o[c+1+s][e+s],p=o[c+s][e+1+s],v=o[c+1+s][e+1+s];var a=u+v;const d=g+p;var i=1;d>a?(i=n*l,f.push(1)):a==d?(i=n*l+t*h,f.push(n*l/i)):(a=d,i=t*h,f.push(0)),o[c+s][e+s]=v-a,o[c+1+s][e+s]=p-a,o[c+s][e+1+s]=g-a,o[c+1+s][e+1+s]=u-a,r[c+s][e+s]=l/i,r[c+1+s][e+s]=h/i,r[c+s][e+1+s]=t/i,r[c+1+s][e+1+s]=n/i}return f}function gap(r,o,n,t,f,s=0,e=0,c=1){const a=r.length;if(f>0){const i=n+t-1+2*s,h=a-(o+t)-2*e-s;if(1==c)for(e=-f;e<=f;e++)for(s=-2*f;s<=2*f;s++)s>=-f+e&&s<=f+e&&(r[h-e][i+s]=0,r.holes[h-e][i+s]=1);else if(2==c)for(e=-f;e<=f;e++)for(s=-f;s<=f;s++)r[h-e][i+s]=0,r.holes[h-e][i+s]=1;else if(3==c)for(s=-f;s<=f;s++)for(e=-2*f;e<=2*f;e++)e>=-f+s&&e<=f+s&&(r[h-e][i+s]=0,r.holes[h-e][i+s]=1)}return r}function gap2(r,o,n,t,f,s=0,e=0){const c=r.length;if(f>0){const a=n+t-1+2*s,i=c-(o+t)-2*e-s;for(e=-f;e<=f;e++)for(s=-f;s<=f;s++)r[i-e][a+s]=0,r.holes[i-e][a+s]=1}return r}export{W_split,Reduction,Matching,gap,gap2};